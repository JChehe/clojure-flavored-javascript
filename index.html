<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.2">
<meta name="author" content="欧阳继超">
<title>Clojure Flavored JavaScript</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Remove the comments around the @import statement below when using this as a custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
[hidden],template{display:none}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
body{margin:0}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}
input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*:before,*:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
#map_canvas img,#map_canvas embed,#map_canvas object,.map_canvas img,.map_canvas embed,.map_canvas object{max-width:none!important}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
.antialiased,body{-webkit-font-smoothing:antialiased}
img{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
p.lead,.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{font-size:1.21875em;line-height:1.6}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol,ul.no-bullet,ol.no-bullet{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.no-bullet{list-style:none}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite:before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media only screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7;font-weight:bold}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix:before,.clearfix:after,.float-group:before,.float-group:after{content:" ";display:table}
.clearfix:after,.float-group:after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
.keyseq{color:rgba(51,51,51,.8)}
kbd{display:inline-block;color:rgba(0,0,0,.8);font-size:.75em;line-height:1.4;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:-.15em .15em 0 .15em;padding:.2em .6em .2em .5em;vertical-align:middle;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menu{color:rgba(0,0,0,.8)}
b.button:before,b.button:after{position:relative;top:-1px;font-weight:400}
b.button:before{content:"[";padding:0 3px 0 2px}
b.button:after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header:before,#header:after,#content:before,#content:after,#footnotes:before,#footnotes:after,#footer:before,#footer:after{content:" ";display:table}
#header:after,#content:after,#footnotes:after,#footer:after{clear:both}
#content{margin-top:1.25em}
#content:before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span:before{content:"\00a0\2013\00a0"}
#header .details br+span.author:before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark:before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber:after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media only screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}@media only screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
.sect1{padding-bottom:.625em}
@media only screen and (min-width:768px){.sect1{padding-bottom:1.25em}}.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor:before,h2>a.anchor:before,h3>a.anchor:before,#toctitle>a.anchor:before,.sidebarblock>.content>.title>a.anchor:before,h4>a.anchor:before,h5>a.anchor:before,h6>a.anchor:before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock>caption.title{white-space:nowrap;overflow:visible;max-width:0}
.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>.paragraph:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media only screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}@media only screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]:before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]:before{display:block}
.listingblock.terminal pre .command:before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt]):before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote:before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote:before{display:none}
.verseblock{margin:0 1em 1.25em 1em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.05em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 0 1.25em 0;display:block}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{text-align:left;word-spacing:0}
.quoteblock.abstract blockquote:before,.quoteblock.abstract blockquote p:first-of-type:before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
table.tableblock td>.paragraph:last-child p>p:last-child,table.tableblock th>p:last-child,table.tableblock td>p:last-child{margin-bottom:0}
table.spread{width:100%}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all th.tableblock,table.grid-all td.tableblock{border-width:0 1px 1px 0}
table.grid-all tfoot>tr>th.tableblock,table.grid-all tfoot>tr>td.tableblock{border-width:1px 1px 0 0}
table.grid-cols th.tableblock,table.grid-cols td.tableblock{border-width:0 1px 0 0}
table.grid-all *>tr>.tableblock:last-child,table.grid-cols *>tr>.tableblock:last-child{border-right-width:0}
table.grid-rows th.tableblock,table.grid-rows td.tableblock{border-width:0 0 1px 0}
table.grid-all tbody>tr:last-child>th.tableblock,table.grid-all tbody>tr:last-child>td.tableblock,table.grid-all thead:last-child>tr>th.tableblock,table.grid-rows tbody>tr:last-child>th.tableblock,table.grid-rows tbody>tr:last-child>td.tableblock,table.grid-rows thead:last-child>tr>th.tableblock{border-bottom-width:0}
table.grid-rows tfoot>tr>th.tableblock,table.grid-rows tfoot>tr>td.tableblock{border-width:1px 0 0 0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot{border-width:1px 0}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.unstyled,ol.unnumbered,ul.checklist,ul.none{list-style-type:none}
ul.unstyled,ol.unnumbered,ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1em;font-size:.85em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{width:1em;position:relative;top:1px}
ul.inline{margin:0 auto .625em auto;margin-left:-1.375em;margin-right:0;padding:0;list-style:none;overflow:hidden}
ul.inline>li{list-style:none;float:left;margin-left:1.375em;display:block}
ul.inline>li>*{display:block}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1{padding-right:.75em;font-weight:bold}
td.hdlist1,td.hdlist2{vertical-align:top}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist>table tr>td:first-of-type{padding:0 .75em;line-height:1}
.colist>table tr>td:last-of-type{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none}
span.footnote,span.footnoteref{vertical-align:super;font-size:.875em}
span.footnote a,span.footnoteref a{text-decoration:none}
span.footnote a:active,span.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em 0;border-width:1px 0 0 0}
#footnotes .footnote{padding:0 .375em;line-height:1.3;font-size:.875em;margin-left:1.2em;text-indent:-1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note:before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip:before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning:before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution:before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important:before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]:after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
h1,h2{letter-spacing:-.01em}
dt,th.tableblock,td.content{text-rendering:optimizeLegibility}
p,td.content{letter-spacing:-.01em}
p strong,td.content strong{letter-spacing:-.005em}
p,blockquote,dt,td.content{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@media print{@page{margin:1.25cm .75cm}
*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare):after,a[href^="https:"]:not(.bare):after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]:after{content:" (" attr(title) ")"}
pre,blockquote,tr,img{page-break-inside:avoid}
thead{display:table-header-group}
img{max-width:100%!important}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
.sect1{padding-bottom:0!important}
.sect1+.sect1{border:0!important}
#header>h1:first-child{margin-top:1.25rem}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em 0}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span:before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]:before{display:block}
#footer{background:none!important;padding:0 .9375em}
#footer-text{color:rgba(0,0,0,.6)!important;font-size:.9em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.2.0/css/font-awesome.min.css">
<style>
.listingblock .pygments .hll { background-color: #ffffcc }
.listingblock .pygments  { background: #f8f8f8; }
.listingblock .pygments .tok-c { color: #408080; font-style: italic } /* Comment */
.listingblock .pygments .tok-err { border: 1px solid #FF0000 } /* Error */
.listingblock .pygments .tok-k { color: #008000; font-weight: bold } /* Keyword */
.listingblock .pygments .tok-o { color: #666666 } /* Operator */
.listingblock .pygments .tok-cm { color: #408080; font-style: italic } /* Comment.Multiline */
.listingblock .pygments .tok-cp { color: #BC7A00 } /* Comment.Preproc */
.listingblock .pygments .tok-c1 { color: #408080; font-style: italic } /* Comment.Single */
.listingblock .pygments .tok-cs { color: #408080; font-style: italic } /* Comment.Special */
.listingblock .pygments .tok-gd { color: #A00000 } /* Generic.Deleted */
.listingblock .pygments .tok-ge { font-style: italic } /* Generic.Emph */
.listingblock .pygments .tok-gr { color: #FF0000 } /* Generic.Error */
.listingblock .pygments .tok-gh { color: #000080; font-weight: bold } /* Generic.Heading */
.listingblock .pygments .tok-gi { color: #00A000 } /* Generic.Inserted */
.listingblock .pygments .tok-go { color: #888888 } /* Generic.Output */
.listingblock .pygments .tok-gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.listingblock .pygments .tok-gs { font-weight: bold } /* Generic.Strong */
.listingblock .pygments .tok-gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.listingblock .pygments .tok-gt { color: #0044DD } /* Generic.Traceback */
.listingblock .pygments .tok-kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.listingblock .pygments .tok-kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.listingblock .pygments .tok-kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.listingblock .pygments .tok-kp { color: #008000 } /* Keyword.Pseudo */
.listingblock .pygments .tok-kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.listingblock .pygments .tok-kt { color: #B00040 } /* Keyword.Type */
.listingblock .pygments .tok-m { color: #666666 } /* Literal.Number */
.listingblock .pygments .tok-s { color: #BA2121 } /* Literal.String */
.listingblock .pygments .tok-na { color: #7D9029 } /* Name.Attribute */
.listingblock .pygments .tok-nb { color: #008000 } /* Name.Builtin */
.listingblock .pygments .tok-nc { color: #0000FF; font-weight: bold } /* Name.Class */
.listingblock .pygments .tok-no { color: #880000 } /* Name.Constant */
.listingblock .pygments .tok-nd { color: #AA22FF } /* Name.Decorator */
.listingblock .pygments .tok-ni { color: #999999; font-weight: bold } /* Name.Entity */
.listingblock .pygments .tok-ne { color: #D2413A; font-weight: bold } /* Name.Exception */
.listingblock .pygments .tok-nf { color: #0000FF } /* Name.Function */
.listingblock .pygments .tok-nl { color: #A0A000 } /* Name.Label */
.listingblock .pygments .tok-nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.listingblock .pygments .tok-nt { color: #008000; font-weight: bold } /* Name.Tag */
.listingblock .pygments .tok-nv { color: #19177C } /* Name.Variable */
.listingblock .pygments .tok-ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.listingblock .pygments .tok-w { color: #bbbbbb } /* Text.Whitespace */
.listingblock .pygments .tok-mb { color: #666666 } /* Literal.Number.Bin */
.listingblock .pygments .tok-mf { color: #666666 } /* Literal.Number.Float */
.listingblock .pygments .tok-mh { color: #666666 } /* Literal.Number.Hex */
.listingblock .pygments .tok-mi { color: #666666 } /* Literal.Number.Integer */
.listingblock .pygments .tok-mo { color: #666666 } /* Literal.Number.Oct */
.listingblock .pygments .tok-sb { color: #BA2121 } /* Literal.String.Backtick */
.listingblock .pygments .tok-sc { color: #BA2121 } /* Literal.String.Char */
.listingblock .pygments .tok-sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.listingblock .pygments .tok-s2 { color: #BA2121 } /* Literal.String.Double */
.listingblock .pygments .tok-se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
.listingblock .pygments .tok-sh { color: #BA2121 } /* Literal.String.Heredoc */
.listingblock .pygments .tok-si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
.listingblock .pygments .tok-sx { color: #008000 } /* Literal.String.Other */
.listingblock .pygments .tok-sr { color: #BB6688 } /* Literal.String.Regex */
.listingblock .pygments .tok-s1 { color: #BA2121 } /* Literal.String.Single */
.listingblock .pygments .tok-ss { color: #19177C } /* Literal.String.Symbol */
.listingblock .pygments .tok-bp { color: #008000 } /* Name.Builtin.Pseudo */
.listingblock .pygments .tok-vc { color: #19177C } /* Name.Variable.Class */
.listingblock .pygments .tok-vg { color: #19177C } /* Name.Variable.Global */
.listingblock .pygments .tok-vi { color: #19177C } /* Name.Variable.Instance */
.listingblock .pygments .tok-il { color: #666666 } /* Literal.Number.Integer.Long */
</style>
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>Clojure Flavored JavaScript</h1>
<div class="details">
<span id="author" class="author">欧阳继超</span><br>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_functional_javascript">1. Functional JavaScript</a>
<ul class="sectlevel2">
<li><a href="#_before_reading_this_book_you_better">1.1. Before Reading This Book, You Better&#8230;&#8203;</a></li>
<li><a href="#_how_is_javascript_functional">1.2. How is JavaScript Functional?</a></li>
<li><a href="#_underscore_you_re_wrong">1.3. Underscore You&#8217;re Wrong</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Unresolved directive in index.adoc - include::preface.adoc[]</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_functional_javascript">1. Functional JavaScript</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This is an introducing chapter will explain the following:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Why JavaScript is a functional language?</p>
</li>
<li>
<p>Why do we care?</p>
</li>
<li>
<p>Why underscore is not functional?</p>
</li>
<li>
<p>What&#8217;s missing in JavaScript as a functional language?</p>
</li>
</ol>
</div>
<div class="sect2">
<h3 id="_before_reading_this_book_you_better">1.1. Before Reading This Book, You Better&#8230;&#8203;</h3>
<div class="dlist">
<dl>
<dt class="hdlist1">Be able to read JavaScript code, that&#8217;s it</dt>
<dd>
<p>It&#8217;s neither a textbook for Clojure nor for JavaScript, of course I&#8217;m gonna borrow the functional part of clojure and introduce into JavaScript, but it&#8217;s all about functional programming in JavaScript, Clojure code in this book is relatively simple and for demonstrating functional thinking.</p>
</dd>
</dl>
</div>
<div class="sect3">
<h4 id="_you_bought_the_wrong_book_if_you_re">1.1.1. You bought the wrong book if you&#8217;re</h4>
<div class="dlist">
<dl>
<dt class="hdlist1">Trying to learn JavaScript</dt>
<dd>
<p>Still, it&#8217;s not textbook for JavaScript, for whoever want to learn JavaScript I highly recommend <em>JavaScript The Good Parts</em> and <a href="https://leanpub.com/javascriptallongesix/read"><em>JavaScript Allong</em></a>.</p>
</dd>
<dt class="hdlist1">Trying to learn Clojure</dt>
<dd>
<p>Again, it&#8217;s not a textbook for Clojure/Script either, all Clojure snippet in this book is for demonstrating purpose only, for whoever want to learn Clojure, <em>The Joy of Clojure</em> is a good choice, and alternately <a href="http://braveclojure.com/">Brave Clojure</a> for online reading.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_for_expert_of_functional_language">1.1.2. For expert of functional language</h4>
<div class="paragraph">
<p>If you already programming with languages such as Scala, Clojure or Haskell, you&#8217;re probably not going to get much benafit from the functional part of this book. Howerver, if you want to migrate to JavaScript, this book will be pretty helpful for you, for you will find similar approach from those languages in javascript.</p>
</div>
</div>
<div class="sect3">
<h4 id="_env_setup">1.1.3. Env Setup</h4>
<div class="paragraph">
<p>Before start reading, if you like to run all the example code in this book, you better setup a cozy environment first. it won&#8217;t take long :)</p>
</div>
<div class="sect4">
<h5 id="_javascript">JavaScript</h5>
<div class="paragraph">
<p>There are two options you can run native javascript code, Modern Browser(Firefox,Chrome) and Node.js. Eventually, there will be some code including macro that which require sweet.js to compile. Alternately, pasting codes in <a href="http://ru-lang.org/try" class="bare">http://ru-lang.org/try</a> is a good choice though.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Install Node/iojs</dt>
<dd>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Download from <a href="https://nodejs.org/">node</a> or <a href="https://iojs.org/">iojs</a></p>
</li>
<li>
<p>or if you&#8217;re using mac, just</p>
<div class="literalblock">
<div class="content">
<pre>brew install node # or
brew install iojs</pre>
</div>
</div>
</li>
<li>
<p>using nvm to maintain multiple version of node/iojs</p>
<div class="literalblock">
<div class="content">
<pre>curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.25.4/install.sh | bash
# then
nvm install stable
# or
nvm install iojs</pre>
</div>
</div>
</li>
</ol>
</div>
</dd>
<dt class="hdlist1">Install sweet.js</dt>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre>npm install -g sweet.js</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_clojure">Clojure</h5>
<div class="paragraph">
<p>If you like to run all clojure expamle as well, please make sure you have <a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">JVM/JDK</a> installed first, then&#8230;&#8203;</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">install leiningen</dt>
<dd>
<p>leiningen package manager of clojure, equivalent of npm to node, bundle to ruby, pip to ruby. Plus, you can also using leinigen as scaffolding tool. you can get install instruction from <a href="http://leiningen.org/">official website</a>。</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>then, all clojure code can be safely running in repl</p>
</div>
<div class="listingblock">
<div class="content">
<pre>lein repl
user=&gt; (+ 1 1)
2</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Editor</dt>
<dd>
<p><a href="http://lighttable.com/">Light Table</a> is good clojure editor for non-emacs user.Off cause emacs still the best editor I ever used.</p>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_how_is_javascript_functional">1.2. How is JavaScript Functional?</h3>
<div class="paragraph">
<p>You may think JavaScript is OO language, but actually, JavaScript is prototype-based multi paradigm language, which means, it also can be use to functional programming.</p>
</div>
<div class="sect3">
<h4 id="_programming_paradigm">1.2.1. Programming Paradigm</h4>
<div class="paragraph">
<p>There&#8217;re 3 commom paradigms, imperative, object oriented and functional. Actually we may also use logic programming sometimes.</p>
</div>
<div class="sect4">
<h5 id="_imperative">Imperative</h5>
<div class="paragraph">
<p>just commands, and some control flow：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="javascript"><span class="tok-k">for</span><span class="tok-p">(</span><span class="tok-kd">var</span> <span class="tok-nx">i</span><span class="tok-o">=</span><span class="tok-mi">0</span><span class="tok-p">;</span><span class="tok-nx">i</span><span class="tok-o">&lt;</span><span class="tok-mi">10</span><span class="tok-p">;</span><span class="tok-nx">i</span><span class="tok-o">++</span><span class="tok-p">){</span>
  <span class="tok-nx">console</span><span class="tok-p">.</span><span class="tok-nx">log</span><span class="tok-p">(</span><span class="tok-s1">&#39;命令&#39;</span><span class="tok-p">,</span><span class="tok-nx">i</span><span class="tok-p">)</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_oo">OO</h5>
<div class="paragraph">
<p>this is so common I don&#8217;t want to explain.</p>
</div>
</div>
<div class="sect4">
<h5 id="_functional">Functional</h5>
<div class="paragraph">
<p>There is no standard defination of functional programming, but basically all about expression, lambda, higher order, immutability, laziness. And you better thinking about data, and abstraction of actions over data.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/paradigm.png" alt="paradigm">
</div>
<div class="title">Figure 1. programming paradigms</div>
</div>
</div>
<div class="sect4">
<h5 id="_logic">Logic</h5>
<div class="paragraph">
<p>You may hear the term logic programming not very often, but I&#8217;m sure you heart of SQL：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="sql"><span class="tok-k">select</span> <span class="tok-n">lastname</span> <span class="tok-k">from</span> <span class="tok-n">someTable</span> <span class="tok-k">where</span> <span class="tok-n">sex</span><span class="tok-o">=</span><span class="tok-s1">&#39;girl&#39;</span> <span class="tok-k">and</span> <span class="tok-n">firstname</span> <span class="tok-k">in</span> <span class="tok-p">(</span><span class="tok-s1">&#39;leela&#39;</span><span class="tok-p">,</span><span class="tok-s1">&#39;amy&#39;</span><span class="tok-p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>there&#8217;re 2 query, or should i say&#8230;&#8203; question:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>sex is girl?</p>
</li>
<li>
<p>first name is leela or amy？</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>I&#8217;ll cover detail of logic programming in JavaScript in chapter 9.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_javascript对函数式的原生支持">1.2.2. JavaScript对函数式的原生支持</h4>
<div class="paragraph">
<p>说了这么多种编程范式，JavaScript 对函数式的支持到底如何呢？</p>
</div>
<div class="paragraph">
<p>首先如果语言中的函数不是一等的，那么也就跟函数式编程也就基本划清界限了。比如Java 8之前的版本，值和对象才是一等公民，要写一个高阶函数可能还需要把函数包在对象中才行。<span class="footnote">[<a id="_footnoteref_1" class="footnote" href="#_footnote_1" title="View footnote.">1</a>]</span></p>
</div>
<div class="paragraph">
<p>幸好 JavaScript 中的函数是一等函数，所谓一等，就是说跟值一样都是一等公民，所有值能到的地方，都可以替换成函数。例如，可以跟值一样作为别的函数的参数，可以被别的函数想值一样返回，而这个“别的函数”叫做 <em>高阶函数</em>。</p>
</div>
<div class="sect4">
<h5 id="_函数作为参数">函数作为参数</h5>
<div class="paragraph">
<p>函数作为参数最典型的应用要数 map 了，想必如果没有使用过 Underscore，也或多或少会用过 ECMAScript 5 中 Array 的 map 方法吧。</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[1,2,3,4].map(function(x){return x++})
// =&gt; [2,3,4,5]</pre>
</div>
</div>
<div class="paragraph">
<p>可以看到函数 <code>function(x){return x++}</code> 是作为参数被传入 Array 的 <code>map</code> 方法中。map 是函数式编程最常见的标志性函数，想想在 ECMAScript 5 出来之前应该怎么做类似的事情：</p>
</div>
<div class="listingblock">
<div class="content">
<pre>var array = [1,2,3,4];
var result;
for(var i in array){
  result.push(i++);
}</pre>
</div>
</div>
<div class="paragraph">
<p>这段命令式的代码跟利用 map 的函数式代码解决问题的方式和角度是完全不同的。命令式需要操心所有的过程，如何遍历以及如何组织结果数据。而 map 由于将遍历，操作以及结果数据的组织的过程封装至 Array 中，从而参数化了最核心过程。而这里的核心过程就是 map 的参数里的匿名函数中的过程，也是我们真正关心的主要逻辑。</p>
</div>
</div>
<div class="sect4">
<h5 id="_函数作为返回值">函数作为返回值</h5>
<div class="paragraph">
<p>函数作为返回值的用法可能在 JavaScript 中会更为常见。而且在不同场景下被返回的函数又有着不同的名字。</p>
</div>
<div class="sect5">
<h6 id="_柯里化">柯里化</h6>
<div class="paragraph">
<p>我们把一个多参的函数变成一次只能接受一个参数的函数的过程叫做柯里化。如：</p>
</div>
<div class="listingblock">
<div class="content">
<pre>var curriedSum = curry(sum)
var sum5 = curriedSum(5)
var sum5and4 = sum5(4) //=&gt; 9
sum5and4(3) // =&gt; 12</pre>
</div>
</div>
<div class="paragraph">
<p>当然柯里化这样做的目的非常简单，可以部分的配置函数，然后可以继续使用这些配置过的函数。当然，我会在第四章函数组合那里更详细的解释为什么要柯里化，在这之前闲不住的读者可以先猜猜为什么要把柯里化放函数组合那一章？</p>
</div>
</div>
<div class="sect5">
<h6 id="_thunk">thunk</h6>
<div class="paragraph">
<p>thunk（槽）<span class="footnote">[<a id="_footnoteref_2" class="footnote" href="#_footnote_2" title="View footnote.">2</a>]</span> 是指有一些操作不被立即执行，也就是说准备好一个函数，但是不执行，默默等待着合适的时候被合适的人调用。我实在想不出能比下图这个玩意更能解释 thunk 的了。 在下一章，你会见到如何用 thunk 实现
惰性序列。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/thunk.png" alt="thunk">
</div>
<div class="title">Figure 2. thunk 像是一个封装好待执行的容器</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_越来越函数式的es6">1.2.3. 越来越函数式的ES6</h4>
<div class="paragraph">
<p>ECMAScript 6（也被叫做 ECMAScript 2015，本书中会简称为 ES6）终于正式发布了，新的规范有非常的新特性，其中不少借鉴自其他函数式语言的特性，给 JavaScript 语言添加了不少函数式的新特性。</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>虽然浏览器厂商都还没有完全实现 ES6 的所有规范，但是其实我们是可以通过一些中间编译器使用大部分的 ES6 的新特性，如</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Babel</dt>
<dd>
<p>这是目前支持 ES6 实现最多的编译器了，没有之一。也是目前能实现尾递归优化的唯一编译器。不过关于尾递归只能优化尾子递归，相互递归的优化还没有实现。</p>
</dd>
<dt class="hdlist1">Traceur</dt>
<dd>
<p>Google 出的比较早得一个老牌编译器，支持的 ES6 也不少了。但是从 github 上来看似乎已经没有 babel 活跃了。</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>当然，除了这些也可以直接使用 FireFox。作为 ES6 规范的主要制定者之一的 Mozilla 出的 Firefox 当然也是浏览器中实现 ES6 标准最多的。</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_箭头函数">1.2.4. 箭头函数</h4>
<div class="paragraph">
<p>这是 ES6 发布的一个新特性，虽然 Firefox 支持已久了，不算什么新东西，但是标准化之后还是比较令人激动的。 <em>箭头函数</em> 也被叫做 <em>肥箭头（fat arrow）</em> <span class="footnote">[<a id="_footnoteref_3" class="footnote" href="#_footnote_3" title="View footnote.">3</a>]</span>，大致是借鉴自 CoffeeScript 或者 Scala 语言。箭头函数是提供词法作用域的匿名函数。</p>
</div>
<div class="sect4">
<h5 id="_声明一个箭头函数">声明一个箭头函数</h5>
<div class="paragraph">
<p>你可以通过两种方式定义一个箭头函数：</p>
</div>
<div class="listingblock">
<div class="content">
<pre>([param] [, param]) =&gt; {
   statement
}
// 或者
param =&gt; expression</pre>
</div>
</div>
<div class="paragraph">
<p>表达式可以省略块（block）括号，而多行语句则需要用块括号括起来。</p>
</div>
</div>
<div class="sect4">
<h5 id="_为什么要用箭头函数">为什么要用箭头函数</h5>
<div class="paragraph">
<p>虽然看上去跟以前的匿名函数没有什么区别，我们可以对比旧的匿名函数是如何写一个使数组中数字都乘 2 的函数.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="javascript"><span class="tok-kd">var</span> <span class="tok-nx">a</span> <span class="tok-o">=</span> <span class="tok-p">[</span><span class="tok-mi">1</span><span class="tok-p">,</span> <span class="tok-mi">2</span><span class="tok-p">,</span> <span class="tok-mi">3</span><span class="tok-p">,</span> <span class="tok-mi">4</span><span class="tok-p">,</span><span class="tok-mi">5</span><span class="tok-p">];</span>
<span class="tok-nx">a</span><span class="tok-p">.</span><span class="tok-nx">map</span><span class="tok-p">(</span><span class="tok-kd">function</span><span class="tok-p">(</span><span class="tok-nx">x</span><span class="tok-p">){</span> <span class="tok-k">return</span> <span class="tok-nx">x</span><span class="tok-o">*</span><span class="tok-mi">2</span> <span class="tok-p">});</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>而使用箭头函数会变成：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="javascript"><span class="tok-nx">a</span><span class="tok-p">.</span><span class="tok-nx">map</span><span class="tok-p">(</span><span class="tok-nx">x</span> <span class="tok-o">=&gt;</span> <span class="tok-nx">x</span><span class="tok-o">*</span><span class="tok-mi">2</span><span class="tok-p">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>使用箭头函数可以少写 function 和 return 以及块括号，从而让我们其实更关心的转换关系变得更明显。略去没用的长的匿名函数定义其实可以让代码更简洁更可读。特别是在传入高阶函数作为参数的时候，<code>map(x &#8658; x*2)</code> 更形象和突出的表达了变换的逻辑。</p>
</div>
</div>
<div class="sect4">
<h5 id="_词法绑定">词法绑定</h5>
<div class="paragraph">
<p>如果你觉得这种简化的语法糖还不足以说服你改变匿名函数的写法，那么想想以前写匿名函数中的经常需要 <code>var self=this`</code> 的苦恼吧。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="javascript">    <span class="tok-kd">var</span> <span class="tok-nx">Multipler</span> <span class="tok-o">=</span> <span class="tok-kd">function</span><span class="tok-p">(</span><span class="tok-nx">inc</span><span class="tok-p">){</span>
      <span class="tok-k">this</span><span class="tok-p">.</span><span class="tok-nx">inc</span> <span class="tok-o">=</span> <span class="tok-nx">inc</span><span class="tok-p">;</span>
    <span class="tok-p">}</span>
    <span class="tok-nx">Multipler</span><span class="tok-p">.</span><span class="tok-nx">prototype</span><span class="tok-p">.</span><span class="tok-nx">multiple</span> <span class="tok-o">=</span> <span class="tok-kd">function</span><span class="tok-p">(</span><span class="tok-nx">numbers</span><span class="tok-p">){</span>
      <span class="tok-kd">var</span> <span class="tok-nx">self</span> <span class="tok-o">=</span> <span class="tok-k">this</span><span class="tok-p">;</span> <i class="conum" data-value="1"></i><b>(1)</b>
      <span class="tok-k">return</span> <span class="tok-nx">numbers</span><span class="tok-p">.</span><span class="tok-nx">map</span><span class="tok-p">(</span><span class="tok-kd">function</span><span class="tok-p">(</span><span class="tok-nx">number</span><span class="tok-p">){</span>
        <span class="tok-k">return</span> <span class="tok-nx">self</span><span class="tok-p">.</span><span class="tok-nx">inc</span> <span class="tok-o">*</span> <span class="tok-nx">number</span><span class="tok-p">;</span> <i class="conum" data-value="2"></i><b>(2)</b>
      <span class="tok-p">})</span>
    <span class="tok-p">}</span>
    <span class="tok-k">new</span> <span class="tok-nx">Multipler</span><span class="tok-p">(</span><span class="tok-mi">2</span><span class="tok-p">).</span><span class="tok-nx">multiple</span><span class="tok-p">([</span><span class="tok-mi">1</span><span class="tok-p">,</span><span class="tok-mi">2</span><span class="tok-p">,</span><span class="tok-mi">3</span><span class="tok-p">,</span><span class="tok-mi">4</span><span class="tok-p">])</span> <span class="tok-c1">// =&gt; [ 2, 4, 6, 8 ]</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>保持 Multipler 的 this 引用的缓存</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>使用 self 引用 Multipler 的实例而不是 this</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>这样做很怪不是吗，因此经常出现在各种面试题中，让你猜猜 this 到底是谁。或者让你去修正 this 绑定，方法如此之多，但是不管是使用 EcmaScript 5 的 bind，还是 map 的第三个参数来保证 this 的绑定不会出错，都逃脱不了要手动修正 this 绑定的命运。</p>
</div>
<div class="paragraph">
<p>那么如果用箭头函数就不会存在这种问题：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="javascript"><span class="tok-nx">Multipler</span><span class="tok-p">.</span><span class="tok-nx">prototype</span><span class="tok-p">.</span><span class="tok-nx">multiple</span> <span class="tok-o">=</span> <span class="tok-kd">function</span><span class="tok-p">(</span><span class="tok-nx">numbers</span><span class="tok-p">){</span>
  <span class="tok-k">return</span> <span class="tok-nx">numbers</span><span class="tok-p">.</span><span class="tok-nx">map</span><span class="tok-p">(</span><span class="tok-nx">number</span> <span class="tok-o">=&gt;</span> <span class="tok-nx">number</span><span class="tok-o">*</span><span class="tok-k">this</span><span class="tok-p">.</span><span class="tok-nx">inc</span><span class="tok-p">);</span>
<span class="tok-p">};</span>

<span class="tok-k">new</span> <span class="tok-nx">Multipler</span><span class="tok-p">(</span><span class="tok-mi">2</span><span class="tok-p">).</span><span class="tok-nx">multiple</span><span class="tok-p">([</span><span class="tok-mi">1</span><span class="tok-p">,</span><span class="tok-mi">2</span><span class="tok-p">,</span><span class="tok-mi">3</span><span class="tok-p">,</span><span class="tok-mi">4</span><span class="tok-p">]);</span><span class="tok-c1">// =&gt; [ 2, 4, 6, 8 ]</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>现在，箭头函数里面的 this 绑定的是外层函数的 this 值，不会受到运行时上下文的影响。<span class="footnote">[<a id="_footnoteref_4" class="footnote" href="#_footnote_4" title="View footnote.">4</a>]</span>而是从词法上就能轻松确定 this 的绑定。不需要 <code>var self=this</code> 了是不是确实方便了许多，不仅不会再被各种怪异的面试题坑了，还让代码更容易推理。</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_尾递归优化">1.2.5. 尾递归优化</h4>
<div class="paragraph">
<p>Clojure 能够通过 <em>recur</em> 函数对 <em>尾递归</em> 进行优化，但是 ES5 的 JavaScript 实现是不会对尾递归进行任何优化，很容易出现 <em>爆栈</em> 的现象。但是 ES6 的标准已经发布了对尾递归优化的支持，下来我们能做的只是等各大浏览器厂商的实现了。</p>
</div>
<div class="paragraph">
<p>不过在干等原生实现的同时，我们也可以通过一些中间编译器如 Babel，把 ES6 的代码编译成 ES5 标准 JavaScript，而在 Babel 编译的过程就可以把尾递归优化成循环。</p>
</div>
</div>
<div class="sect3">
<h4 id="_destructure">1.2.6. Destructure</h4>
<div class="paragraph">
<p>在解释 Destructure <span class="footnote">[<a id="_footnoteref_5" class="footnote" href="#_footnote_5" title="View footnote.">5</a>]</span> 之前，先举个生动的例子，比如吃在奥利奥的是时候，我的吃法是这样的：</p>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>掰成两片，一片是不带馅的，一份是带馅的</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>带馅的一半沾一下牛奶</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>舔掉馅</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>合起来吃掉</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>如果写成代码，大致应该是这样的：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="javascript"><span class="tok-kd">var</span> <span class="tok-nx">orea</span> <span class="tok-o">=</span> <span class="tok-p">[</span><span class="tok-s2">&quot;top&quot;</span><span class="tok-p">,</span><span class="tok-s2">&quot;middle&quot;</span><span class="tok-p">,</span><span class="tok-s2">&quot;bottom&quot;</span><span class="tok-p">]</span>
<span class="tok-kd">var</span> <span class="tok-nx">top</span> <span class="tok-o">=</span> <span class="tok-nx">orea</span><span class="tok-p">.</span><span class="tok-nx">shift</span><span class="tok-p">(),</span><span class="tok-nx">middleAndButton</span><span class="tok-o">=</span><span class="tok-nx">orea</span> <i class="conum" data-value="1"></i><b>(1)</b>
<span class="tok-kd">var</span> <span class="tok-nx">wetMiddleAndButton</span> <span class="tok-o">=</span> <span class="tok-nx">dipMilk</span><span class="tok-p">(</span><span class="tok-nx">middleAndButton</span><span class="tok-p">)</span> <i class="conum" data-value="2"></i><b>(2)</b>
<span class="tok-kd">var</span> <span class="tok-nx">button</span> <span class="tok-o">=</span> <span class="tok-nx">lip</span><span class="tok-p">(</span><span class="tok-nx">wetMiddleAndButton</span><span class="tok-p">)</span> <i class="conum" data-value="3"></i><b>(3)</b>
<span class="tok-nx">eat</span><span class="tok-p">([</span><span class="tok-nx">top</span><span class="tok-p">,</span><span class="tok-nx">button</span><span class="tok-p">])</span> <i class="conum" data-value="4"></i><b>(4)</b></code></pre>
</div>
</div>
<div class="paragraph">
<p>注意那个诡异的 <code>shift</code>，如果用 destructure 会写得稍微优雅一些：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="javascript"><span class="tok-kd">var</span> <span class="tok-p">[</span><span class="tok-nx">top</span><span class="tok-p">,</span> <span class="tok-p">...</span><span class="tok-nx">middleAndButton</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">[</span><span class="tok-s2">&quot;top&quot;</span><span class="tok-p">,</span><span class="tok-s2">&quot;middle&quot;</span><span class="tok-p">,</span><span class="tok-s2">&quot;bottom&quot;</span><span class="tok-p">]</span> <i class="conum" data-value="1"></i><b>(1)</b>
<span class="tok-kd">var</span> <span class="tok-nx">wetMiddleAndButton</span> <span class="tok-o">=</span> <span class="tok-nx">dipMilk</span><span class="tok-p">(</span><span class="tok-nx">middleAndButton</span><span class="tok-p">)</span> <i class="conum" data-value="2"></i><b>(2)</b>
<span class="tok-kd">var</span> <span class="tok-nx">button</span> <span class="tok-o">=</span> <span class="tok-nx">lip</span><span class="tok-p">(</span><span class="tok-nx">wetMiddleAndButton</span><span class="tok-p">)</span> <i class="conum" data-value="3"></i><b>(3)</b>
<span class="tok-nx">eat</span><span class="tok-p">([</span><span class="tok-nx">top</span><span class="tok-p">,</span><span class="tok-nx">button</span><span class="tok-p">])</span> <i class="conum" data-value="4"></i><b>(4)</b></code></pre>
</div>
</div>
<div class="paragraph">
<p>有没有觉得我掰奥利奥的姿势变酷了许多？这就是 destructure，给定一个特定的模式 <code>[top, &#8230;&#8203;middleAndButton]</code>，让数据 <code>["top","middle","bottom"]</code> 按照该模式匹配进来。同样的，会专门在第6章介绍模式匹配这个概念，虽然它不是 Clojure 的重要概念，但是确实 Scala 或 Haskell 的核心所在。不过可以放心的是，你不必先学习 Scala 和 Haskell，我还是会用最流行的 JavaScript 来介绍模式匹配。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/patten-matching.jpg" alt="patten matching">
</div>
<div class="title">Figure 3. 我觉得这个玩具可以特别形象的解释模式匹配这个概念</div>
</div>
<div class="paragraph">
<p>Unresolved directive in chapter1/index.adoc - include::what-is-mbbissing.adoc[]</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_underscore_you_re_wrong">1.3. Underscore You&#8217;re Wrong</h3>
<div class="paragraph">
<p>You&#8217;ll probably come up with underscore.js in mind when mentioning functional programmint in JavaScript, here&#8217;s the description of underscore.js:
<em>Underscore provides over 100 functions that support both your favorite workaday functional helpers: map, filter, invoke — as well as more specialized goodies: function binding, javascript templating……</em></p>
</div>
<div class="paragraph">
<p>wait, I&#8217;m not agree on the term "fucntional helpers" that much。</p>
</div>
<div class="sect3">
<h4 id="__map_is_different">1.3.1. "map" is different</h4>
<div class="paragraph">
<p>let&#8217;s see how other functional language doing map:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Clojure</dt>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre>(map inc [1,2,3])</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Haskell</dt>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre>map (1+) [1,2,3]</pre>
</div>
</div>
<div class="paragraph">
<p><code>inc</code> is a function simply increase the number. now lets see how underscore doing map:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>_.map([1,2,3], function(x){return x+1})</pre>
</div>
</div>
<div class="paragraph">
<p>any difference? yeah, the order of arguments.</p>
</div>
<div class="paragraph">
<p>OK, you&#8217;ll gonna say just difference in order, not a big deal.</p>
</div>
<div class="paragraph">
<p>but let&#8217;s compare with other JavaScript functional library:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="http://ramdajs.com/">ramdajs</a></dt>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre>R.map(function(x){return x+1}, [1,2,3])</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="http://functionaljs.com/">functionaljs</a></dt>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre>fjs.map(function(x){return x+1}, [1,2,3])</pre>
</div>
</div>
<div class="paragraph">
<p>now is it a little bit awkward?</p>
</div>
</div>
<div class="sect3">
<h4 id="_clojurescript">1.3.2. ClojureScript</h4>
<div class="paragraph">
<p>Underscore is different, so there should be a reason how all others doing. I&#8217;m not gonna use it as functional library in this book, instead, clojure seems so simple and pure functional. it&#8217;s lisp so it simple, and it running on JVM which make it powerful. But the more important thing is, ClojureScript can compile to JavaScript, so it can be running on browser and anywhere JavaScript can.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/everyscript.png" alt="everyscript">
</div>
<div class="title">Figure 4. some language that compiles to JavaScript</div>
</div>
<div class="paragraph">
<p>But I&#8217;m not talking about ClojureScript here, i&#8217;m looking for a functional library.</p>
</div>
</div>
<div class="sect3">
<h4 id="_mori">1.3.3. Mori</h4>
<div class="paragraph">
<p>mori is basically a compiled ClojureScript data structure and functions, it&#8217;s perfect choice that I can use it as a functional library for JavaScript, and gain all the good part of immutable data structure from Clojure。</p>
</div>
<div class="paragraph">
<p>Unresolved directive in index.adoc - include::chapter2/index.adoc[]</p>
</div>
<div class="paragraph">
<p>Unresolved directive in index.adoc - include::chapter3/index.adoc[]</p>
</div>
<div class="paragraph">
<p>Unresolved directive in index.adoc - include::chapter4/index.adoc[]</p>
</div>
<div class="paragraph">
<p>Unresolved directive in index.adoc - include::chapter5/index.adoc[]</p>
</div>
<div class="paragraph">
<p>Unresolved directive in index.adoc - include::chapter6/index.adoc[]</p>
</div>
<div class="paragraph">
<p>Unresolved directive in index.adoc - include::chapter7/index.adoc[]</p>
</div>
<div class="paragraph">
<p>Unresolved directive in index.adoc - include::chapter8/index.adoc[]</p>
</div>
<div class="paragraph">
<p>Unresolved directive in index.adoc - include::chapter9/index.adoc[]</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footnotes">
<hr>
<div class="footnote" id="_footnote_1">
<a href="#_footnoteref_1">1</a>. 事实上，JavaScript 或者 Scala 其实也是通过把函数作为一种特殊的对象，来把函数变成一等公民。不过，在使用上基本感觉不到函数是对象。而在 Clojure 中，函数确确实实就是一等公民，因为所有 lisp 语言都一样，代码即是数据。
</div>
<div class="footnote" id="_footnote_2">
<a href="#_footnoteref_2">2</a>. thunk 的翻译“槽”来自《计算机程序的构造与解释》，但是我个人倾向不做翻译，因为很难从“槽”这一个字中获取到足够多的解释。
</div>
<div class="footnote" id="_footnote_3">
<a href="#_footnoteref_3">3</a>. 相对于廋箭头（thin arrow）。
</div>
<div class="footnote" id="_footnote_4">
<a href="#_footnoteref_4">4</a>. 正如我说的本书不是 JavaScript 的教科书，所以关于动态绑定和词法绑定，这里不会做太多的解释。简单的解释就是词法绑定可以从词法分析（通俗的说就是肉眼直接能看出来）判断出来绑定的值，而相反动态绑定需要根据运行时上下文决定。
</div>
<div class="footnote" id="_footnote_5">
<a href="#_footnoteref_5">5</a>. 同样的，我读的中文技术书太少，倾向于不翻译此类专业名词。翻译错了反而体会不出来原词的意思。这里明显 structure 是构造，前面加 de 词根，就是构造的反过程。
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2015-07-23 22:00:35 CST
</div>
</div>
</body>
</html>