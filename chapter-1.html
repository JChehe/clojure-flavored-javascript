<!DOCTYPE html>
<html>
<head>
<!-- 2015-10-28 Wed 21:49 -->
<meta  charset="utf-8">
<meta  name="viewport" content="width=device-width, initial-scale=1">
<title></title>
<meta  name="generator" content="Org-mode">
<meta  name="author" content="Jichao Ouyang">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="/style/pixyll.css"/>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<nav id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgheadline1">Functional JavaScript</a>
<ul>
<li><a href="#orgheadline14">Before Reading This Book, You Better&#x2026;</a>
<ul>
<li><a href="#orgheadline2">Be able to read JavaScript code, that's it</a>
<ul>
<li><a href="#orgheadline5">You bought the wrong book if you're</a>
<ul>
<li><a href="#orgheadline3">trying to learn JavaScript</a></li>
<li><a href="#orgheadline4">trying to learn Clojure</a></li>
</ul>
</li>
<li><a href="#orgheadline6">For expert of functional language</a></li>
</ul>
</li>
<li><a href="#orgheadline7">Env Setup</a>
<ul>
<li><a href="#orgheadline8">JavaScript</a>
<ul>
<li><a href="#orgheadline9">Install Node/iojs</a></li>
<li><a href="#orgheadline10">Install sweet.js</a></li>
</ul>
</li>
<li><a href="#orgheadline11">Clojure</a>
<ul>
<li><a href="#orgheadline12">install leiningen</a></li>
<li><a href="#orgheadline13">Editor</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#orgheadline15">So, Functional JavaScript, you sure?</a>
<ul>
<li><a href="#orgheadline16">Imperative</a></li>
<li><a href="#orgheadline17">Object Oriented</a></li>
<li><a href="#orgheadline18">Functional</a></li>
<li><a href="#orgheadline19">Logic</a></li>
<li><a href="#orgheadline20">JavaScript Native Functional Support</a>
<ul>
<li><a href="#orgheadline21">First Class Function</a>
<ul>
<li><a href="#orgheadline22">Function as Parameter</a></li>
<li><a href="#orgheadline23">Return a Function</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#orgheadline30">The Missing Things from JavaScript for a Functional Language</a>
<ul>
<li><a href="#orgheadline26">Immutable Data Structure</a></li>
<li><a href="#orgheadline27">Lazy evaluation</a></li>
<li><a href="#orgheadline28">Composable Function</a></li>
<li><a href="#orgheadline29">Tail Recursion Optimization</a></li>
</ul>
</li>
<li><a href="#orgheadline31">Well, Underscore You are Doing it Wrong!</a></li>
</ul>
</li>
</ul>
</div>
</nav>
<div id="outline-container-orgheadline1" class="outline-2">
<h2 id="orgheadline1">Functional JavaScript</h2>
<div class="outline-text-2" id="text-orgheadline1">
<p>
This is an introducing chapter will explain the following:
</p>

<ol class="org-ol">
<li>Why JavaScript is a functional language?</li>
<li>Why do we care?</li>
<li>Why underscore is not functional?</li>
<li>What's missing in JavaScript as a functional language?</li>
</ol>
</div>

<div id="outline-container-orgheadline14" class="outline-3">
<h3 id="orgheadline14">Before Reading This Book, You Better&#x2026;</h3>
<div class="outline-text-3" id="text-orgheadline14">
</div><div id="outline-container-orgheadline2" class="outline-4">
<h4 id="orgheadline2">Be able to read JavaScript code, that's it</h4>
<div class="outline-text-4" id="text-orgheadline2">
<p>
It's neither a textbook for Clojure nor for JavaScript, of course I'm gonna borrow the functional part of clojure and introduce into JavaScript, but it's all about functional programming in JavaScript, Clojure code in this book is relatively simple and for demonstrating functional thinking.
</p>
</div>

<div id="outline-container-orgheadline5" class="outline-5">
<h5 id="orgheadline5">You bought the wrong book if you're</h5>
<div class="outline-text-5" id="text-orgheadline5">
</div><div id="outline-container-orgheadline3" class="outline-6">
<h6 id="orgheadline3">trying to learn JavaScript</h6>
<div class="outline-text-6" id="text-orgheadline3">
<p>
Still, it's not textbook for JavaScript, for whoever want to learn JavaScript I highly recommend <i>JavaScript The Good Parts</i> and <a href="https://leanpub.com/javascriptallongesix/read">JavaScript Allong</a>.
</p>
</div>
</div>
<div id="outline-container-orgheadline4" class="outline-6">
<h6 id="orgheadline4">trying to learn Clojure</h6>
<div class="outline-text-6" id="text-orgheadline4">
<p>
Again, it's not a textbook for Clojure/Script either, all Clojure snippet in this book is for demonstrating purpose only, for whoever want to learn Clojure, <i>The Joy of Clojure</i> is a good choice, and alternately, <a href="http://braveclojure.com/">Brave Clojure</a> for online reading.
</p>
</div>
</div>
</div>
<div id="outline-container-orgheadline6" class="outline-5">
<h5 id="orgheadline6">For expert of functional language</h5>
<div class="outline-text-5" id="text-orgheadline6">
<p>
If you already programming with languages such as Scala, Clojure or Haskell, you're probably not going to get much benafit from the functional part of this book. Howerver, if you want to migrate to JavaScript, this book will be pretty helpful for you, for you will find similar approach from those languages in javascript.
</p>
</div>
</div>
</div>
<div id="outline-container-orgheadline7" class="outline-4">
<h4 id="orgheadline7">Env Setup</h4>
<div class="outline-text-4" id="text-orgheadline7">
<p>
Before start reading, if you like to run all the example code in this book, you better setup a cozy environment first. it won't take long :)
</p>
</div>
<div id="outline-container-orgheadline8" class="outline-5">
<h5 id="orgheadline8">JavaScript</h5>
<div class="outline-text-5" id="text-orgheadline8">
<p>
There are two options you can run native javascript code, Modern Browser(Firefox,Chrome) and Node.js. Eventually, there will be some code including macro that which require sweet.js to compile. Alternately, pasting codes in <a href="http://ru-lang.org/try">http://ru-lang.org/try</a> is a good choice though.
</p>
</div>
<div id="outline-container-orgheadline9" class="outline-6">
<h6 id="orgheadline9">Install Node/iojs</h6>
<div class="outline-text-6" id="text-orgheadline9">
<ul class="org-ul">
<li>Download from <a href="https://nodejs.org/">https://nodejs.org/</a></li>
<li>or if you're using mac, just</li>
</ul>
<div class="org-src-container">

<pre class="src src-sh">brew install node
</pre>
</div>
<ol class="org-ol">
<li>using n to maintain multiple version of node</li>
</ol>

<div class="org-src-container">

<pre class="src src-sh">npm install n -g
<span style="color: #8c8c8c; font-style: italic;"># </span><span style="color: #8c8c8c; font-style: italic;">then</span>
n install stable
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline10" class="outline-6">
<h6 id="orgheadline10">Install sweet.js</h6>
<div class="outline-text-6" id="text-orgheadline10">
<div class="org-src-container">

<pre class="src src-sh">npm install -g sweet.js
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgheadline11" class="outline-5">
<h5 id="orgheadline11">Clojure</h5>
<div class="outline-text-5" id="text-orgheadline11">
<p>
If you like to run all clojure expamle as well, please make sure you have <a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">JVM/JDK</a> installed first, then&#x2026;
</p>
</div>
<div id="outline-container-orgheadline12" class="outline-6">
<h6 id="orgheadline12">install leiningen</h6>
<div class="outline-text-6" id="text-orgheadline12">
<p>
leiningen package manager of clojure, equivalent of npm to node, bundle to ruby, pip to ruby. Plus, you can also using leinigen as scaffolding tool. you can get install instruction from <a href="http://leiningen.org/">official website</a>。
</p>

<p>
then, all clojure code can be safely running in repl
</p>
<div class="org-src-container">

<pre class="src src-sh">lein repl
<span style="color: #b8860b;">user</span>=&gt; (+ 1 1)
2
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline13" class="outline-6">
<h6 id="orgheadline13">Editor</h6>
<div class="outline-text-6" id="text-orgheadline13">
<p>
<a href="http://lighttable.com/">LightTable</a> is good clojure editor for non-emacs user.Off cause emacs still the best editor I ever used.
</p>
</div>
</div>
</div>
</div>
</div>

<div id="outline-container-orgheadline15" class="outline-3">
<h3 id="orgheadline15">So, Functional JavaScript, you sure?</h3>
<div class="outline-text-3" id="text-orgheadline15">
<p>
When people taking about functional language, probably Haskell, Scala, Clojure will come to your mind first. But, JavaScript can be functional as well as those languages. JavaScript is actually a multi-paradigm programming language.
</p>

<p>
There are about 3 kinds of programming paradigm we normally using:
<i>Imperative</i>, <i>Object Oriented</i> and <i>Functional</i> of cause. (and there is a 4th kind of paradigm: Logic Programming we will take about it in the last chapter).
</p>
</div>

<div id="outline-container-orgheadline16" class="outline-4">
<h4 id="orgheadline16">Imperative</h4>
<div class="outline-text-4" id="text-orgheadline16">
<p>
It's the probably most used and less need of design kind of programming paradigm. You basically write program like just some kind of ordered list of commands.
</p>
<div class="org-src-container">

<pre class="src src-javascript"><span style="color: #00008b;">for</span>(<span style="color: #00008b;">var</span> <span style="color: #b8860b;">i</span>=0;i&lt;10;i++){
  console.log(<span style="color: #8b0000;">'command #'</span>,i)
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline17" class="outline-4">
<h4 id="orgheadline17">Object Oriented</h4>
<div class="outline-text-4" id="text-orgheadline17">
<p>
Also, it's very common, and with a little bit design needed while you programming. So when you programming, you modeling or abstracting you App like Objects in the real world.
Objects can be compose by other objects, or inherent from  other objects.
</p>
</div>
</div>

<div id="outline-container-orgheadline18" class="outline-4">
<h4 id="orgheadline18">Functional</h4>
<div class="outline-text-4" id="text-orgheadline18">
<p>
It's like solving Math problems, you need to abstract some sort of expressions, and eval them with known input, the you get a value based on that input. But it's never such simple, when you abstract a good expression, it better be <i>pure</i>, <i>immutable</i>, <i>composable</i>&#x2026;
</p>


<figure>
<p><img src="./images/paradigm.png" alt="paradigm.png">
</p>
<figcaption><span class="figure-number">Figure 1:</span> Programming Paradigms</figcaption>
</figure>
</div>
</div>

<div id="outline-container-orgheadline19" class="outline-4">
<h4 id="orgheadline19">Logic</h4>
<div class="outline-text-4" id="text-orgheadline19">
<p>
You may not hear this term very often, but it's basically just like SQL query which we may sometimes writing. So, it's just questions, for example if I want to count how many foot 3 chickens have, simply just multiply chicken number and foot number each chickens have. But what if I ask "how many foot chicken boys have?", how can you get a function to give the answer? with SQL query it's easy:
</p>
<div class="org-src-container">

<pre class="src src-sql"><span style="color: #00008b;">select</span> <span style="color: #228b22;">count</span>(*) <span style="color: #00008b;">from</span> chicken <span style="color: #00008b;">where</span> sex=<span style="color: #8b0000;">'boy'</span>
</pre>
</div>

<p>
so for Logic Programming, Clojure provide a handy library called <code>core.logic</code>, but I'm going to talk about <a href="https://github.com/tonsky/datascript/">datascript</a> in the last chapter for explaining more about logic programming in JavaScript.
</p>
</div>
</div>


<div id="outline-container-orgheadline20" class="outline-4">
<h4 id="orgheadline20">JavaScript Native Functional Support</h4>
<div class="outline-text-4" id="text-orgheadline20">
<p>
Let's focus on how functional JavaScript can be?
</p>
</div>

<div id="outline-container-orgheadline21" class="outline-5">
<h5 id="orgheadline21">First Class Function</h5>
<div class="outline-text-5" id="text-orgheadline21">
<p>
Fist class function means function that can be treat as value, so it can get anywhere value can. So just like a value, a function can be other function's parameter, a function can be return by other function, and that <b>other function</b> is aka <i>Higher-order Function</i>.
</p>
</div>

<div id="outline-container-orgheadline22" class="outline-6">
<h6 id="orgheadline22">Function as Parameter</h6>
<div class="outline-text-6" id="text-orgheadline22">
<p>
So one typical usage of function as parameter is <code>map</code>, so you can 
</p>
<div class="org-src-container">

<pre class="src src-javascript">[1,2,3,4].map(<span style="color: #00008b;">function</span>(<span style="color: #b8860b;">x</span>){<span style="color: #00008b;">return</span> ++x})
<span style="color: #8c8c8c; font-style: italic;">// </span><span style="color: #8c8c8c; font-style: italic;">=&gt; [2,3,4,5]</span>
</pre>
</div>

<p>
Think about how we gonna implement the same thing if not using map:
</p>

<div class="org-src-container">

<pre class="src src-js"><span style="color: #00008b;">var</span> <span style="color: #b8860b;">array</span> = [1,2,3,4];
<span style="color: #00008b;">var</span> <span style="color: #b8860b;">result</span> = [];
<span style="color: #00008b;">for</span>(<span style="color: #00008b;">var</span> <span style="color: #b8860b;">i</span> <span style="color: #00008b;">in</span> array){
  result.push(++i);
}
console.log(result);
</pre>
</div>

<p>
The old imperative code just look more lower lever, no any abstraction at all, programmer need to think about nearly every step the machine can understand. But with the abstraction of <code>map</code> for <i>Array</i>, we kind of just don't care about how the Array should be iterated &#x2013; the process, we need to specify what we want to do with each element, and Array will take care of everything else.
</p>
</div>
</div>

<div id="outline-container-orgheadline23" class="outline-6">
<h6 id="orgheadline23">Return a Function</h6>
<div class="outline-text-6" id="text-orgheadline23">
<p>
You may seeing this eventually and maybe you didn't know. They have very fancy name depends how we return the function.
</p>
</div>

<ul class="org-ul"><li><a id="orgheadline24"></a>Currying<br ><div class="outline-text-7" id="text-orgheadline24">
<p>
A function that consume one argument at a time is called <i>Curried Function</i>. how to make it so is called <i>Curry</i>.
</p>

<div class="org-src-container">

<pre class="src src-js"><span style="color: #00008b;">var</span> <span style="color: #b8860b;">curriedSum</span> = curry(sum)
<span style="color: #00008b;">var</span> <span style="color: #b8860b;">sum5</span> = curriedSum(5)
<span style="color: #00008b;">var</span> <span style="color: #b8860b;">sum5and4</span> = sum5(4) <span style="color: #8c8c8c; font-style: italic;">//</span><span style="color: #8c8c8c; font-style: italic;">=&gt; 9</span>
sum5and4(3) <span style="color: #8c8c8c; font-style: italic;">// </span><span style="color: #8c8c8c; font-style: italic;">=&gt; 12</span>
</pre>
</div>

<p>
The rationale of doing so is simple, we can configure part of the function and reuse it later, so every function can be composable when giving it each parameter.
I will talk more about Curry in Chapter 4 anyway.
</p>
</div></li>

<li><a id="orgheadline25"></a>Thunk<br ><div class="outline-text-7" id="text-orgheadline25">
<p>
A thunk is something not executed yet, but waiting someone to click the <b>Button</b>. I'll explain thunk in Section 2.4 - <i>Lazy Sequence</i>.
</p>


<figure>
<p><img src="./images/thunk.png" alt="thunk.png">
</p>
<figcaption><span class="figure-number">Figure 2:</span> Thunk is like a container with a open button</figcaption>
</figure>
</div></li></ul>
</div>
</div>
</div>
</div>


<div id="outline-container-orgheadline30" class="outline-3">
<h3 id="orgheadline30">The Missing Things from JavaScript for a Functional Language</h3>
<div class="outline-text-3" id="text-orgheadline30">
</div><div id="outline-container-orgheadline26" class="outline-4">
<h4 id="orgheadline26">Immutable Data Structure</h4>
</div>

<div id="outline-container-orgheadline27" class="outline-4">
<h4 id="orgheadline27">Lazy evaluation</h4>
</div>

<div id="outline-container-orgheadline28" class="outline-4">
<h4 id="orgheadline28">Composable Function</h4>
</div>

<div id="outline-container-orgheadline29" class="outline-4">
<h4 id="orgheadline29">Tail Recursion Optimization</h4>
</div>
</div>

<div id="outline-container-orgheadline31" class="outline-3">
<h3 id="orgheadline31">Well, Underscore You are Doing it Wrong!</h3>
</div>
</div>
</div>
<div id="postamble" class="status">
<p>Author: Jichao Ouyang</p>
<p>Modified: 2015-10-28 Wed 21:34</p>
<p><a href="http://www.gnu.org/software/emacs/">Emacs</a> 24.5.1 (<a href="http://orgmode.org">Org</a> mode 8.3.2)</p>
<p>&lt;&gt; with _(:з」∠)_ by <a href="https://github.com/jcouyang/orgpress">OrgPress</a></p>
<p><a href="/index.xml">RSS</a> | <a href="/archive.html">ARCHIVE</a> | <a href="/theindex.html">INDEX</a> | <a href="#" id="edit-in-github">EDIT</a></p>

<script>
 (function(){
   document.getElementById('edit-in-github').addEventListener("click",function(){
     var pathname = window.location.pathname;
     window.location.href = "https://github.com/jcouyang/blog/edit/master/org"+pathname.replace(".html",".org");
   })
 })()
</script>
<!-- Google Analystics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-32314154-10', 'auto');
  ga('send', 'pageview');

</script>
<!-- Disqus -->
<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
 var disqus_shortname = 'orgblog';
 var href = window.location.href;
 href.replace(/^https/, 'http');
 var disqus_url = href;
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
<!-- Swiftype Search -->
<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
  (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
  e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v1/st.js','_st');

  _st('install','eGLqWnAM75a66SiXKVW3');
</script>
</div>
</body>
</html>
